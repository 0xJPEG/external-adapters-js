#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

yarn generate:readme -a
README_GENERATOR_EXIT_CODE=$?

if [ $README_GENERATOR_EXIT_CODE -ne 0 ]; then
    echo "README(s) could not be generated. Aborting commit."
    exit 1
else
    README_FILES=$(git diff --name-only)
    git add $README_FILES
    echo "README(s) generated successfully."
fi

yarn lint-staged
